import os
#import random
import time
from colorthief import ColorThief
#import matplotlib.pyplot as plt
from colour import importColour

directory = '/home/{}/Pictures/wallpaper/'.format(os.getlogin())
os.chdir(directory)

def changeImage():
    image_format = ["png", "jpg"]
    images = [image for image in os.listdir() if image.endswith(tuple(image_format))]
    print(images)
    for image_name in images:
        wallpaper = os.path.join(os.getcwd(), image_name)
        os.system('hyprctl hyprpaper preload "{}"'.format(wallpaper))
        os.system('hyprctl hyprpaper wallpaper "eDP-1,{}"'.format(wallpaper))

        print(wallpaper)
        #setImage(wallpaper)
        importColour(wallpaper)
        return wallpaper

def setImage(wallpaper):
    os.system('hyprctl hyprpaper preload "{}"'.format(wallpaper))
    os.system('hyprctl hyprpaper wallpaper "eDP-1,{}"'.format(wallpaper))
    #os.system('hyprctl dispatch exec hyprpaper')


def takeEffect():
    while True:
        changeImage()
        time.sleep(3)

if __name__ == "__main__":
    takeEffect()
